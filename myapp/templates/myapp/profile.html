{% load static %}

    <div class="main-content">
    <div class="introduction">
        <div class="nameDisplay">{{ user.name }}</div>
        <div class="emailDisplay">{{ user.email }}</div>
    </div>
    <br>
    <hr />
    <div class="options"> 
        <div class="option-list">
            <button class="profile-button">
                <i class="fa-solid fa-user"></i>
                Profile
            </button>
        </div>
        <div class="option-list">
            <button class="settings-button">
                 <i class="fa-solid fa-gear"></i>
                 Settings
            </button>
        </div>
        <hr />
        <div class="option-list">
          <a href="{% url 'signin' %}"><button class="logout-button">
                 <i class="fa-solid fa-right-from-bracket"> </i>
                 Logout
            </button>
            </a>
        </div>
    </div>
    </div>

    <div class="overlay">
    <div class="dialog"  id="profile-dialog">
    <form method="POST"  class="profile-form">
        {% csrf_token %}
        <div>
           <p class="head-text">Profile Settings</p> <br>
           <p class="sub-text">Manage your account settings and preferences</p>
        </div>
        <br>

        <div class="tabs">
            <button type="button" class="tab active" id="profile-tab">Profile</button>
            <button type="button" class="tab" id="notification-tab">Notification</button>
            <button type="button" class="tab" id="security-tab">Security</button>
        </div>
        <br>

        <div class="psection active" id="profile-section">
        <div>
        <p class="first-text">Personal Information</p><br>
        <p class="second-text">Update your profile details</p><br>
        </div>
        <br>
        <hr>
        <br>
        <div class="personal_details">
        <div id="picture">
            <div id="circle"></div> 
            <span id="center">
            <button id="change-picture"><i class="fa-solid fa-camera"></i>  Change Photo</button>
            <p class="sub-info"> JPG or PNG(MAX 800*400px) </p>
            </span>
        </div>
        <br>
        <br>
        <div id="usernames">
            <label for="name">Name</label> <br>
            <input type="text" name="name" id="name" value="{{ user.name }}" placeholder="Enter your name here">
        </div>
        <br>
        <div id="emails">
            <label for="email">Email</label><br>
            <input type="text" name="email" id="email" value="{{ user.email }}" placeholder="Enter your email here">
        </div>
        <br>
        <div id="numbers">
            <label for="phone">Phone Number</label><br>
            <input type="number" name="phone" id="phone" value="{{ user.phone }}" placeholder="Enter your number here">
        </div>
        <br>
        <div>
            <button type="button" id="save-profile" class="save"><i class="fa-solid fa-print"></i> Save Changes</button>
        </div>
        </div>
    </div>

        <div class="psection" id="notification-section">
        <p class="first-text">Notification Preferences</p><br>
        <p class="second-text">Manage how you receive notifications</p> <br> 
        <br>
        <hr>
        <br>
        <div class="notification-list">
            <div class="line">
            <label for="email-notif">Email Notifications</label>
            <label class="switch">
            <input type="checkbox" id="email-notif" {% if notification_settings.email_notifications %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Receive notifications via email</p>
        </div>
        <br>
        <div class="notification-list">
            <div class="line">
            <label for="push-notif">Push Notifications</label>
            <label class="switch">
            <input type="checkbox" id="push-notif" {% if notification_settings.push_notifications %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Receive push notifications in browser</p>
        </div>
        <br>
        <div class="notification-list">
            <div class="line">
            <label for="monthly-report">Monthly Reports</label>
            <label class="switch">
            <input type="checkbox" id="monthly-report" {% if notification_settings.monthly_reports %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Get monthly financial summary reports</p>
        </div>
        <br>
        <div class="notification-list">
            <div class="line">
            <label for="budget-alert">Budget Alerts</label>
            <label class="switch">
            <input type="checkbox" id="budget-alert" {% if notification_settings.budget_alerts %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Alert me when approaching budget limits</p>
        </div>
        <br>
        <div class="notification-list">
            <div class="line">
            <label for="goal-reminder">Goal Reminders</label>
            <label class="switch">
            <input type="checkbox" id="goal-reminder" {% if notification_settings.goal_reminders %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Remind me about goals progress</p>
        </div>
        <br>
        <div>
            <button type="button" id="save-notifications" class="save"><i class="fa-solid fa-print"></i> Save Preferences</button>
        </div>
        </div>

        <div class="psection" id="security-section">
            <p class="first-text">Password and Security</p><br>
            <p class="second-text">Manage your password and security settings</p><br>
            <br>
            <hr>
            <br>
            <div class="password-list">
            <label for="current-password"> Current Password</label><br>
            <input type="password" id="current-password" placeholder="Enter your current password here.">
            </div>
            <br>
            <div class="password-list">
            <label for="new-password">New Password</label><br>
            <input type="password" id="new-password" placeholder="Create new password">
            </div>
            <br>
            <div class="password-list">
            <label for="confirm-password">Confirm New Password</label><br>
            <input type="password" id="confirm-password" placeholder="Confirm new password">
            </div>
            <br>
            <div>
             <button type="button" id="save-password" class="save"><i class="fa-solid fa-print"></i>Update Password</button>   
            </div>
            <a href="{% url 'forgot_password' %}"> Forgot password? </a>
            <br>
            <hr>
            <div class="authentication-list">
                <p class="first-text">Two-Factor Authentication</p><br>
                <br>
                <label for="authentication">Enable two-factor authentication</label>
                <input type="checkbox" id="authentication" {% if privacy_settings.two_factor_auth %}checked{% endif %}>
                <p class="sub-info">Add an extra layer of security to your account</p>
                <br>
                <button type="button" class="delete" id="delete_account">Delete Account</button> 
                <p class="sub-info" id="alignment">This action cannot be undone</p> 
            </div>
        </div>    
    </form>
    </div>

    <div class="dialog" id="settings-dialog">
        <form method="POST" class="settings-form">
        {% csrf_token %}
        <section>
           <p class="head-text">Settings</p><br>
           <p class="sub-text">Customize your finance tracker experience</p><br>
        </section>
        <br>
        <div class="privacy-section">
            <p class="first-text">Privacy Settings</p><br>
            <p class="second-text">Control your data and privacy preferences</p> <br>
            <br>
            <hr>
            <br>
            <div class="privacy-list">
            <div class="line">
            <label for="analytics-track">Analytics Tracking</label>
            <label class="switch">
            <input type="checkbox" id="analytics-track" {% if privacy_settings.analytics_tracking %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Help us improve by sharing usage analytics</p>
            </div>
            <br>
            <div class="privacy-list">
            <div class="line">
            <label for="crash-reporting">Crash Reporting</label>
            <label class="switch">
            <input type="checkbox" id="crash-reporting" {% if privacy_settings.crash_reporting %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Automatically send crash reports to help fix bugs</p>
            </div>
            <br>
            <div class="privacy-list">
            <div class="line">
            <label for="usage-data">Share Usage Data</label>
            <label class="switch">
            <input type="checkbox" id="usage-data" {% if privacy_settings.usage_data %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Share anonymized usage data for research</p>
            </div>
            <br>
            <div class="privacy-list">
            <div class="line">
            <label for="spending-insights">Spending insights</label>
            <label class="switch">
            <input type="checkbox" id="spending-insights" {% if privacy_settings.spending_insights %}checked{% endif %}>
            <span class="toggle"></span>
            </label>
            </div>
            <p class="sub-info">Show personalized spending tips and insights</p>
            <br>
            <button type="button" class="save" id="save-privacy"><i class="fa-solid fa-print"></i> Save Privacy Settings</button>
            </div>
        </div>
        <br>
        <div class="privacy-section" >
            <p class="first-text">Data Management</p><br>
            <p class="second-text">Export or delete your data</p><br>
            <br>
            <button class="export"><i class="fa-solid fa-download"></i>Export all Settings</button> <br>
            <button type="button" class="delete"><i class="fa-solid fa-trash"></i>Clear All App Data</button> <br>
            <p class="sub-info" id="align">Clearing data will reset all settings to default</p> 
        </div>
    </form>
    </div>
    </div>

    <script src="{% static 'myapp/js/loadheader.js' %}"></script>

    <script src="{% static 'myapp/js/profile.js' %}"></script>

    